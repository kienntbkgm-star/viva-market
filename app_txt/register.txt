# TÃ“M Táº®T LOGIC TRANG REGISTER.TSX

## ğŸ¯ Má»¤C ÄÃCH
Trang **Ä‘Äƒng kÃ½ tÃ i khoáº£n má»›i** - cho phÃ©p user táº¡o tÃ i khoáº£n Ä‘á»ƒ sá»­ dá»¥ng app

## ğŸ“Š STATE QUáº¢N LÃ

**State local:**
- `name`: Há» vÃ  tÃªn
- `phone`: Sá»‘ Ä‘iá»‡n thoáº¡i
- `password`: Máº­t kháº©u

**Data tá»« Store:**
- `register()`: Function Ä‘Äƒng kÃ½ tÃ i khoáº£n
- `expoToken`: Token cho push notification

## ğŸ”„ LUá»’NG THá»°C THI

### **Khi User ÄÄƒng KÃ½:**
```
User nháº­p: name, phone, password
  â†“
Nháº¥n "Táº O TÃ€I KHOáº¢N"
  â†“
handleRegister() Ä‘Æ°á»£c gá»i
  â†“
Validate:
  - Kiá»ƒm tra khÃ´ng Ä‘á»ƒ trá»‘ng
  - SÄT pháº£i >= 10 kÃ½ tá»±
  â†“
Gá»i register(name, phone, password, expoToken)
  â†“
Náº¿u success:
  - Alert "TÃ i khoáº£n Ä‘Ã£ Ä‘Æ°á»£c táº¡o"
  - Button "ÄÄƒng nháº­p ngay" â†’ /login
Náº¿u fail:
  - Alert "Lá»—i" + message
```

## ğŸ”§ FUNCTION CHÃNH

### `handleRegister()`
**Validation:**
1. Kiá»ƒm tra khÃ´ng Ä‘á»ƒ trá»‘ng: `!name || !phone || !password`
2. Kiá»ƒm tra Ä‘á»™ dÃ i SÄT: `phone.length < 10`

**Xá»­ lÃ½:**
```javascript
const result = await register(name, phone, password, expoToken);
if (result.success) {
  Alert vá»›i button "ÄÄƒng nháº­p ngay" â†’ router.replace('/login')
} else {
  Alert hiá»ƒn thá»‹ lá»—i
}
```

**Äáº·c Ä‘iá»ƒm:**
- Gá»­i kÃ¨m expoToken Ä‘á»ƒ admin cÃ³ thá»ƒ gá»­i push notification sau nÃ y
- Sau khi Ä‘Äƒng kÃ½ thÃ nh cÃ´ng â†’ Chuyá»ƒn Ä‘áº¿n trang Login (khÃ´ng tá»± Ä‘á»™ng login)

## ğŸ¨ UI Cáº¤U TRÃšC

```
SafeAreaView
  â†“
ScrollView
  â”œâ”€â”€ NÃºt quay láº¡i (â† Quay láº¡i)
  â”œâ”€â”€ Title: "ÄÄ‚NG KÃ"
  â”œâ”€â”€ MyInput (Há» vÃ  tÃªn)
  â”œâ”€â”€ MyInput (Sá»‘ Ä‘iá»‡n thoáº¡i - phone-pad)
  â”œâ”€â”€ MyInput (Máº­t kháº©u - isPass)
  â”œâ”€â”€ MyButton (Táº O TÃ€I KHOáº¢N)
  â””â”€â”€ Link: "ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p" â†’ router.back()
```

## âš™ï¸ VALIDATION

**Kiá»ƒm tra dá»¯ liá»‡u:**
```javascript
// 1. KhÃ´ng Ä‘á»ƒ trá»‘ng
if (!name || !phone || !password) {
  return Alert.alert("Lá»—i", "Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin");
}

// 2. Äá»™ dÃ i SÄT
if (phone.length < 10) {
  return Alert.alert("Lá»—i", "Sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng há»£p lá»‡");
}
```

**LÆ°u Ã½:**
- Chá»‰ check basic validation (rá»—ng, Ä‘á»™ dÃ i)
- KhÃ´ng check format SÄT chi tiáº¿t (regex)
- KhÃ´ng check Ä‘á»™ máº¡nh password

## âš¡ ÄIá»‚M Äáº¶C BIá»†T

âœ… **KhÃ´ng tá»± Ä‘á»™ng login** - Sau khi Ä‘Äƒng kÃ½ thÃ nh cÃ´ng pháº£i quay vá» Login
âœ… **Gá»­i kÃ¨m expoToken** - Äá»ƒ sau nÃ y admin cÃ³ thá»ƒ push notification
âœ… **Alert vá»›i button action** - Nháº¥n "ÄÄƒng nháº­p ngay" chuyá»ƒn luÃ´n Ä‘áº¿n Login
âœ… **2 cÃ¡ch quay láº¡i Login**:
   - NÃºt "â† Quay láº¡i" phÃ­a trÃªn
   - Link "ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p" phÃ­a dÆ°á»›i
âœ… **KhÃ´ng cÃ³ loading state** - Register xong thÃ¬ alert ngay

## ğŸš€ USER JOURNEY

```
User chÆ°a cÃ³ tÃ i khoáº£n
  â†“
VÃ o trang Login â†’ Click "ÄÄƒng kÃ½ ngay"
  â†“
VÃ o trang Register
  â†“
Nháº­p thÃ´ng tin: TÃªn, SÄT, Password
  â†“
Nháº¥n "Táº O TÃ€I KHOáº¢N"
  â†“
Validate pass â†’ Gá»i API register
  â†“
ThÃ nh cÃ´ng â†’ Alert â†’ Nháº¥n "ÄÄƒng nháº­p ngay"
  â†“
Quay vá» Login vá»›i tÃ i khoáº£n má»›i táº¡o
```

## ğŸ”— NAVIGATION

**VÃ o Register tá»«:**
- âœ… Login: Click link "ÄÄƒng kÃ½ ngay"

**Tá»« Register Ä‘i Ä‘áº¿n:**
- âœ… Login: Sau khi Ä‘Äƒng kÃ½ thÃ nh cÃ´ng (alert button)
- âœ… Login: Click nÃºt "â† Quay láº¡i" hoáº·c link "ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p"

## ğŸ’¾ Dá»® LIá»†U Táº O Má»šI

**User má»›i Ä‘Æ°á»£c táº¡o vá»›i:**
```javascript
{
  name: "TÃªn user nháº­p",
  phone: "SÄT user nháº­p",
  password: "Password user nháº­p",
  expoToken: "Token tá»« device (náº¿u cÃ³)",
  role: "user",           // Máº·c Ä‘á»‹nh
  status: "enable",       // Máº·c Ä‘á»‹nh
  point: 0,              // Máº·c Ä‘á»‹nh
  createdAt: ISO string
}
```

**LÆ°u vÃ o:**
- Firestore collection: `users`
- Document ID: auto-generated hoáº·c custom (tÃ¹y logic store)

## ğŸ’¡ LÆ¯U Ã Ká»¸ THUáº¬T

**expoToken:**
- DÃ¹ng Ä‘á»ƒ gá»­i push notification
- ÄÆ°á»£c láº¥y tá»« store (Ä‘Ã£ setup khi app khá»Ÿi Ä‘á»™ng)
- Admin cÃ³ thá»ƒ gá»­i thÃ´ng bÃ¡o cho user nÃ y sau khi Ä‘Äƒng kÃ½

**KhÃ´ng tá»± Ä‘á»™ng login:**
- Sau khi register success, user pháº£i login láº¡i
- LÃ½ do: Äá»ƒ verify password má»™t láº§n ná»¯a
- Best practice: TÃ¡ch biá»‡t register vÃ  login flow

**State khÃ´ng reset:**
- Sau khi register fail, dá»¯ liá»‡u váº«n giá»¯ nguyÃªn
- User cÃ³ thá»ƒ sá»­a vÃ  thá»­ láº¡i
- KhÃ´ng bá»‹ máº¥t dá»¯ liá»‡u Ä‘Ã£ nháº­p

===============================================================================
Cáº¬P NHáº¬T: 27/01/2026
===============================================================================
